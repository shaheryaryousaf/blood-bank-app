{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { CREATE_USER_SUCCESS, CREATE_USER_FAIL } from \"./types\";\nimport { auth, firebase2, db } from \"../config/firebase\";\nexport var signUp = function signUp(name, email, password, password2) {\n  return function _callee(dispatch) {\n    var errorCode, errorMessage;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n\n            if (!(password !== password2)) {\n              _context.next = 4;\n              break;\n            }\n\n            alert(\"Passwords don't match.\");\n            return _context.abrupt(\"return\");\n\n          case 4:\n            firebase2.auth().createUserWithEmailAndPassword(email, password).then(function (response) {\n              var uid = response.user.uid;\n              var data = {\n                id: uid,\n                email: email,\n                name: name\n              };\n              var usersRef = firebase2.firestore().collection('profiles');\n              usersRef.doc(uid).set(data).then(function () {\n                console.log('SUCCESS');\n              }).catch(function (error) {\n                alert(error);\n              });\n            }).catch(function (error) {\n              alert(error);\n            });\n            _context.next = 14;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            errorCode = _context.t0.code;\n            errorMessage = _context.t0.message;\n            console.log(errorCode);\n            console.log(errorMessage);\n            dispatch({\n              type: CREATE_USER_FAIL\n            });\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\nexport var fbLogin = function fbLogin() {\n  return function _callee2(dispatch) {\n    var provider;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            try {\n              provider = new auth.GoogleAuthProvider();\n              firebase2.auth().signInWithPopup(provider).then(function (result) {\n                var user = result.user;\n                var token = result.credential.accessToken;\n                dispatch({\n                  type: CREATE_USER_SUCCESS,\n                  payload: {\n                    user: user,\n                    token: token\n                  }\n                });\n                console.log(user);\n                console.log(user.displayName);\n              }).catch(function (error) {\n                console.log(error);\n              });\n            } catch (error) {\n              dispatch({\n                type: CREATE_USER_FAIL\n              });\n            }\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};","map":{"version":3,"sources":["H:/React/native/blood-bank/app/actions/Authentication.js"],"names":["CREATE_USER_SUCCESS","CREATE_USER_FAIL","auth","firebase2","db","signUp","name","email","password","password2","dispatch","alert","createUserWithEmailAndPassword","then","response","uid","user","data","id","usersRef","firestore","collection","doc","set","console","log","catch","error","errorCode","code","errorMessage","message","type","fbLogin","provider","GoogleAuthProvider","signInWithPopup","result","token","credential","accessToken","payload","displayName"],"mappings":"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","sourcesContent":["import { CREATE_USER_SUCCESS, CREATE_USER_FAIL } from './types'\r\nimport { auth, firebase2, db } from '../config/firebase'\r\n\r\n// import * as firebase from 'firebase'\r\n// import 'firebase/firestore'\r\n\r\nexport const signUp = (name, email, password, password2) => async (\r\n  dispatch\r\n) => {\r\n  try {\r\n    if (password !== password2) {\r\n      alert(\"Passwords don't match.\")\r\n      return\r\n    }\r\n    firebase2\r\n      .auth()\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then((response) => {\r\n        const uid = response.user.uid\r\n        const data = {\r\n          id: uid,\r\n          email,\r\n          name,\r\n        }\r\n        const usersRef = firebase2.firestore().collection('profiles')\r\n        usersRef\r\n          .doc(uid)\r\n          .set(data)\r\n          .then(() => {\r\n            // navigation.navigate('Home', { user: data })\r\n            console.log('SUCCESS')\r\n          })\r\n          .catch((error) => {\r\n            alert(error)\r\n          })\r\n      })\r\n      .catch((error) => {\r\n        alert(error)\r\n      })\r\n  } catch (error) {\r\n    var errorCode = error.code\r\n    var errorMessage = error.message\r\n    console.log(errorCode)\r\n    console.log(errorMessage)\r\n    dispatch({\r\n      type: CREATE_USER_FAIL,\r\n    })\r\n  }\r\n}\r\n\r\n// export const signUp = (name, email, password) => async (dispatch) => {\r\n//   try {\r\n//     await firebase.auth().createUserWithEmailAndPassword(email, password)\r\n//     const currentUser = firebase.auth().currentUser\r\n\r\n//     console.log(currentUser.user)\r\n\r\n//     const db = firebase.firestore()\r\n//     db.collection('profiles').doc(currentUser.uid).set({\r\n//       email: currentUser.email,\r\n//       name: name,\r\n//       password: password,\r\n//       user: currentUser.uid,\r\n//     })\r\n//   } catch (error) {\r\n//     var errorCode = error.code\r\n//     var errorMessage = error.message\r\n//     dispatch({\r\n//       type: CREATE_USER_FAIL,\r\n//     })\r\n//   }\r\n// }\r\n\r\nexport const fbLogin = () => async (dispatch) => {\r\n  try {\r\n    var provider = new auth.GoogleAuthProvider()\r\n    firebase2\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(function (result) {\r\n        var user = result.user\r\n        var token = result.credential.accessToken\r\n\r\n        dispatch({\r\n          type: CREATE_USER_SUCCESS,\r\n          payload: { user, token },\r\n        })\r\n        console.log(user)\r\n        console.log(user.displayName)\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error)\r\n      })\r\n  } catch (error) {\r\n    dispatch({\r\n      type: CREATE_USER_FAIL,\r\n    })\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}