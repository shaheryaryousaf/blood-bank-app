{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { COMPLETE_PROFILE_SUCCESS, COMPLETE_PROFILE_FAIL, GET_PROFILE_SUCCESS, GET_PROFILE_FAIL, GET_ALL_PROFILES_SUCCESS, GET_ALL_PROFILES_FAIL } from \"./types\";\nimport { firestore } from \"../config/firebase\";\nexport var completeProfile = function completeProfile(data) {\n  return function _callee(dispatch) {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              firestore.collection('profiles').doc(data.id).update({\n                phone: data.phone,\n                age: data.age,\n                blood_group: data.blood_group,\n                address: data.address,\n                city: data.city,\n                bio: data.bio\n              });\n              dispatch({\n                type: COMPLETE_PROFILE_SUCCESS,\n                payload: res\n              });\n            } catch (err) {\n              dispatch({\n                type: COMPLETE_PROFILE_FAIL\n              });\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\nexport var getAllProfiles = function getAllProfiles() {\n  return function _callee2(dispatch) {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            try {\n              firestore.collection('profiles').onSnapshot(function (snapshot) {\n                var postData = [];\n                snapshot.forEach(function (doc) {\n                  return postData.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n                    id: doc.id\n                  }));\n                });\n                console.log(postData);\n                setPosts(postData);\n              });\n            } catch (error) {\n              dispatch({\n                type: GET_ALL_PROFILES_FAIL\n              });\n            }\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\nexport var getProfile = function getProfile(data) {\n  return function _callee3(dispatch) {\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            try {\n              firestore.collection('profiles').doc(data).get().then(function (doc) {\n                if (doc.exists) {\n                  dispatch({\n                    type: GET_PROFILE_SUCCESS,\n                    payload: doc.data()\n                  });\n                } else {\n                  dispatch({\n                    type: GET_PROFILE_FAIL\n                  });\n                }\n              }).catch(function (error) {\n                console.log('Error getting document:', error);\n              });\n            } catch (err) {\n              dispatch({\n                type: GET_PROFILE_FAIL\n              });\n            }\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};","map":{"version":3,"sources":["H:/React/native/blood-bank/app/actions/Profile.js"],"names":["COMPLETE_PROFILE_SUCCESS","COMPLETE_PROFILE_FAIL","GET_PROFILE_SUCCESS","GET_PROFILE_FAIL","GET_ALL_PROFILES_SUCCESS","GET_ALL_PROFILES_FAIL","firestore","completeProfile","data","dispatch","collection","doc","id","update","phone","age","blood_group","address","city","bio","type","payload","res","err","getAllProfiles","onSnapshot","snapshot","postData","forEach","push","console","log","setPosts","error","getProfile","get","then","exists","catch"],"mappings":"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","sourcesContent":["import {\r\n  COMPLETE_PROFILE_SUCCESS,\r\n  COMPLETE_PROFILE_FAIL,\r\n  GET_PROFILE_SUCCESS,\r\n  GET_PROFILE_FAIL,\r\n  GET_ALL_PROFILES_SUCCESS,\r\n  GET_ALL_PROFILES_FAIL,\r\n} from './types'\r\nimport { firestore } from '../config/firebase'\r\n\r\n/* ============================== */\r\n/* CREATE NEW USER PROFILE */\r\n/* ============================== */\r\nexport const completeProfile = (data) => async (dispatch) => {\r\n  try {\r\n    firestore.collection('profiles').doc(data.id).update({\r\n      phone: data.phone,\r\n      age: data.age,\r\n      blood_group: data.blood_group,\r\n      address: data.address,\r\n      city: data.city,\r\n      bio: data.bio,\r\n    })\r\n    dispatch({\r\n      type: COMPLETE_PROFILE_SUCCESS,\r\n      payload: res,\r\n    })\r\n  } catch (err) {\r\n    dispatch({\r\n      type: COMPLETE_PROFILE_FAIL,\r\n    })\r\n  }\r\n}\r\n\r\n/* ============================== */\r\n/* GET ALL PROFILES */\r\n/* ============================== */\r\nexport const getAllProfiles = () => async (dispatch) => {\r\n  try {\r\n    firestore.collection('profiles').onSnapshot((snapshot) => {\r\n      const postData = []\r\n      snapshot.forEach((doc) => postData.push({ ...doc.data(), id: doc.id }))\r\n      console.log(postData) // <------\r\n      setPosts(postData)\r\n    })\r\n  } catch (error) {\r\n    dispatch({\r\n      type: GET_ALL_PROFILES_FAIL,\r\n    })\r\n  }\r\n}\r\n\r\n/* ============================== */\r\n/* GET USER PROFILE */\r\n/* ============================== */\r\nexport const getProfile = (data) => async (dispatch) => {\r\n  try {\r\n    firestore\r\n      .collection('profiles')\r\n      .doc(data)\r\n      .get()\r\n      .then(function (doc) {\r\n        if (doc.exists) {\r\n          dispatch({\r\n            type: GET_PROFILE_SUCCESS,\r\n            payload: doc.data(),\r\n          })\r\n        } else {\r\n          dispatch({\r\n            type: GET_PROFILE_FAIL,\r\n          })\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log('Error getting document:', error)\r\n      })\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_PROFILE_FAIL,\r\n    })\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}